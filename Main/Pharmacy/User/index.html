<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&family=Noto+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link
    href="https://fonts.googleapis.com/css2?family=Lobster+Two:ital,wght@0,400;0,700;1,400;1,700&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <link rel="stylesheet" href="./Style/style.css" />

    <title>Pharmacy</title>
  </head>
  <body>
    <section id="Nav">
        <div>
            <span id="logo">
                SheArogya Pharmacy
            </span>
            <span id="search">
                <input type="text" name="" id="">
                <button><span class="material-symbols-outlined">
                    search
                    </span></button>
            </span>
        </div>
        <div></div>

    </section>

    <section style="padding-top: 6px">
      <aside>
        <ul>
          <h3>Category</h3>
          <li><a href="">Analgesics</a></li>
          <li><a href="">Antacids</a></li>
          <li><a href="">Antianxiety Drugs</a></li>
          <li><a href="">Antiarrhythmics</a></li>
        </ul>
        <br />
        <ul>
          <h3>Rating</h3>
          <li>
            <a href=""><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 1,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 1,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 1,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 1,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 1,'wght' 400,'GRAD' 200,'opsz' 48">star</span></a>
          </li>
          <li>
            <a href=""><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 1,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 1,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 1,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 1,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 0,'wght' 400,'GRAD' 200,'opsz' 48">star</span></a>
          </li>
          <li>
            <a href=""><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 1,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 1,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 1,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 0,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 0,'wght' 400,'GRAD' 200,'opsz' 48">star</span></a>
          </li>
          <li>
            <a href=""><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 1,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 1,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 0,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 0,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 0,'wght' 400,'GRAD' 200,'opsz' 48">star</span></a>
          </li>
          <li>
            <a href=""><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 1,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 0,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 0,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 0,'wght' 400,'GRAD' 200,'opsz' 48">star</span><span class="material-symbols-outlined" style="font-variation-settings:'FILL' 0,'wght' 400,'GRAD' 200,'opsz' 48">star</span></a>
          </li>
        </ul>
      </aside>
      <section class="CardHolder" id="CardHolder">
 
      </section>

      <style>
   
        #Cart{
          max-height: 300px;
          overflow-y: scroll;
          background: rgb(224, 224, 224);
          width: 200px;
          position: fixed;
          z-index: 100;
          right: 10px;
          bottom: 50px;
          display: flex;
          flex-direction: column-reverse;
          outline: 1px solid rgba(0, 0, 0, 0.288);
          padding: 5px;
          border-radius: 5px;
          gap: 5px;
        }
        .CartItem{
          cursor:pointer;
          background: white;
          outline: 1px solid rgba(0, 0, 0, 0.288);
          padding: 3px;
          border-radius: 5px;
        }
        .CartItem:hover{
          background: rgb(235, 130, 130);

        }
        #Checkout{
          position: fixed;
          bottom: 10px;
          right: 10px;
          width:200px;
          height: 30px;
        }
      </style>

      <div id="Cart">
     
      </div>
      <button id="Checkout">Checkout</button>
    </section>

    <template id="ItemTemplate">
      <div class="card" >
        <img id="Image" src=""/>
        <div>
          <h2 id="Name"></h2>
          <h1 id="Price"></h1>
          <span onclick="AddtoCart(this)" style="display: flex;align-items: center;gap: 7px;" >Add To Cart<span class="material-symbols-outlined">
            shopping_cart
            <h1 id="ID" hidden></h1>
            </span></span>
          
        </div>
      </div>
    </template>
  </body>
  <script src="../../../Scripts/Config.js"></script>
  <script>
    Total=0
    let PharmacyItems={}
    const Cart =document.getElementById('Cart')
    const Checkout =document.getElementById('Checkout')
    function AddtoCart(item){
      console.log(item.querySelector('#ID').innerText)
      id=item.querySelector('#ID').innerText
      listItem=document.createElement('div')

      // listItem.innerHTML=PharmacyItems[id]['Name']+" ₹"+parseFloat( PharmacyItems[id]['Price'])
      listItem.innerHTML="<span>"+PharmacyItems[id]['Name']+"</span> ₹"+"<span id='PriceInCart'>"+parseFloat( PharmacyItems[id]['Price'])+"</span>"
      
      listItem.className='CartItem'
      listItem.addEventListener('click',RemoveFromCart)
      Cart.appendChild(listItem)
      Total+= parseFloat( PharmacyItems[id]['Price'])
      Checkout.innerText='Checkout ₹'+Total
    }

    function RemoveFromCart(){
    Cart.removeChild(this)
    Total-=parseFloat(this.querySelector('#PriceInCart').innerText)
    Checkout.innerText='Checkout ₹'+ Total
    }

const CardHolder = document.getElementById('CardHolder')
Template = document.getElementById('ItemTemplate')

i=0
StudentArray = [];
fetch(SERVER_URL + "/Pharmacy/Items")
    .then((response) => response.json())
    .then((data) => {
        data.forEach((item) => {
            i++
            const content = Template.content.cloneNode(true)
            content.getElementById('Image').src = 'data:image/png;base64,'+item['Image']
            content.getElementById('Name').innerText =item['Name']
            content.getElementById('Price').innerText = item['Price']
            content.getElementById('ID').innerText = i
            CardHolder.appendChild(content)
            PharmacyItems[i]={
              'Element':content,
              'Name':item['Name'],
              'Price':item['Price']
            }
        });
    });


   
  </script>
</html>
